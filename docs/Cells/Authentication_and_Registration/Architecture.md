# üèóÔ∏è 3. System Architecture

## üîπ System Design

The Authentication and Registration microservice has been designed with a **microservices-based architecture** to ensure **scalability, modularity, and security**. Its implementation follows **decoupling principles**, allowing other modules within **Parfinanciero** to interact with it without depending on its internal implementation.

This approach ensures that services can evolve independently, enabling the incorporation of new functionalities **without affecting system stability**. Additionally, the architecture is designed to be **highly available and fault-tolerant**, ensuring that authentication and session management remain operational at all times.

---

## üõ†Ô∏è Technologies and Frameworks Used

- **Backend Framework**: **Spring Boot (Java)** for building the service.
- **Database**: **PostgreSQL** for structured storage of users and roles.
- **Authentication**: **Firebase Authentication** for implementing **OAuth 2.0** with Google and Microsoft.
- **Security**: Implementation of **JSON Web Tokens (JWT)** for secure session and permission management.
- **Containerization**: **Docker** to ensure stable and reproducible execution environments.
- **Configuration Management**: **Spring Cloud Config** for centralized service configuration management.
- **Microservices Communication**: **RESTful APIs** with **OAuth 2.0 and JWT-based security**.
- **Monitoring and Logging**: **Prometheus and Grafana** for monitoring the service and visualizing key metrics.

---

## üîÑ Internal Data Flow

### **User Registration**
1. A user logs in with **Google** or **Microsoft** through **Firebase**.
2. **Firebase generates a valid authentication token**.
3. The token is sent to the microservice, which **validates its authenticity** and extracts the user's data.
4. If validation is successful, the **user is registered in PostgreSQL** with the necessary information.

### **Authentication and Session Management**
1. An **authenticated user receives a JWT** generated by the system.
2. This **token is used in every subsequent request** to validate the user's identity.
3. **Security middleware intercepts requests and validates the JWT signature**.

---